var t=Object.defineProperty,e=(e,s,a)=>(((e,s,a)=>{s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a})(e,"symbol"!=typeof s?s+"":s,a),a);import{p as s}from"./phaser-cxBNu8M8.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const a=class t{static getConfig(){return t.config}static isFps60(){return t.fps.fps60}static isAllowUpdate(){return t.fps.allowUpdate}static isGameOver(){return t.gameOver}static getScaleGame(){return t.scaleGame}static isPausaInicial(){return t.pausa.inicial.activa}static getPausaInicialDuracion(){return t.pausa.inicial.duracion}static isPacmanDies(){return t.pausa.pacmanDies}static isPausaComeFantasma(){return t.pausa.comeFantasma.activa}static isNivelSuperado(){return t.pausa.nivelSuperado.activa}static getPuntos(){return t.puntos}static getNivel(){return t.nivel}static getRecord(){return t.hi}static getVidas(){return t.vidas}static getTxtScore(){return t.txtScore}static isInvisible(){return t.pacman.invisible}static isFantasmasScary(){return t.fantasmasScary.activo}static isFantasmasIntermitente(){return t.fantasmasScary.intermitente}static getFantasmasScaryDuracion(){return t.fantasmasScary.duracion}static getFantasmasBonusInc(){return t.fantasmasBonusInc}static getCerezasIniXY(){return t.cerezasIniXY}static getBonusCerezas(){return t.bonusCerezas}static getIntervaloCerezas(){return t.intervaloCerezas}static getCameraControles(){return t.cameraControles}static getCameraScores(){return t.cameraScores}static setConfigVel(e){t.config.vel=e}static setFps60(e){t.fps.fps60=e}static setAllowUpdate(e){t.fps.allowUpdate=e}static setNivelSuperado(e){t.pausa.nivelSuperado.activa=e}static setGameOver(e){t.gameOver=e}static setScaleGame(e){t.scaleGame=e}static setPausaInicial(e){t.pausa.inicial.activa=e}static setPacmanDies(e){t.pausa.pacmanDies.activa=e}static setInvisible(e){t.pacman.invisible=e}static setPausaComeFantasma(e){t.pausa.comeFantasma.activa=e}static setNivelSuperado(e){t.pausa.nivelSuperado.activa=e}static setPuntos(e){t.puntos=e}static setNivel(e){t.nivel=e}static setRecord(e){t.hi=e}static setVidas(e){t.vidas=e}static setFantasmasScary(e){t.fantasmasScary.activo=e}static setFantasmasIntermitente(e){t.fantasmasScary.intermitente=e}static setFantasmasBonusInc(e){t.fantasmasBonusInc.contador=e}};e(a,"controlElegido",{mobile:!1,keyboard:!0}),e(a,"config",{vel:2}),e(a,"screen",{width:864,height:704,escBoundsX:1.35,escBoundsY:1.9}),e(a,"tileXY",{x:16,y:16}),e(a,"scaleGame",4),e(a,"fps",{fps60:!0,allowUpdate:!0}),e(a,"puntos",0),e(a,"nivel",1),e(a,"hi",12e3),e(a,"vidas",3),e(a,"gameOver",!1),e(a,"txtScore","Score: "),e(a,"pausa",{inicial:{activa:!1,duracion:4300},pacmanDies:{activa:!1,duracion:3100},comeFantasma:{activa:!1,duracion:500},nivelSuperado:{activa:!1,duracion:3500}}),e(a,"pacman",{iniX:9,iniY:4,vel:2,velocity:125,invisible:!1,direccion:{left:[-1,0,180,"left"],right:[1,0,0,"right"],up:[0,-1,270,"up"],down:[0,1,90,"down"]}}),e(a,"pacmanPregame",{iniX:-4,iniY:2,vel:2}),e(a,"fantasmasIniXY",{azul:[8,10],rojo:[9,10],verde:[10,10],pink:[9,8]}),e(a,"fantasmasScary",{activo:!1,duracion:[8500,8500,8e3,7e3,6e3,5e3,4500,4e3,3500,3250,3e3,2750,2500,2250,2e3,2e3,2e3,2e3,2e3,2e3,2e3],intermitente:!1}),e(a,"fantasmasBonusInc",{puntos:[200,400,800,1600],color:["#fc1","#f91","#f51","#f21"],contador:0,duracion:3200}),e(a,"puntitosGordos",{uple:[1,1],upri:[1,17],dole:[16,1],dori:[16,17]}),e(a,"cerezasIniXY",[9,12]),e(a,"bonusCerezas",[300,300,500,800,1e3,2e3,3e3,5e3,5e3,5e3,5e3,5e3,5e3,5e3,5e3]),e(a,"intervaloCerezas",15e3),e(a,"cameraControles",{x:0,y:a.screen.height-256,ancho:600,alto:400,scrollX:-70,scrollY:-1080}),e(a,"cameraScores",{x:0,y:0,ancho:a.screen.width,alto:34,scrollX:0,scrollY:-90}),e(a,"depth",{fondo:0,puntitos:100,pared:200,item:300,jugador:400,fantasmas:500,efectos:600,fantasmon:620,botones:650,marcadores:700,controles:800,textos:900}),e(a,"audio",{numKey:null,key:null});let i=a;class o{constructor(t,e){this.relatedScene=t,this.datos=e}create(){const{x:t,y:e,txt:s,size:a,color:i,style:o,stroke:r,sizeStroke:n,shadowOsx:c,shadowOsy:l,shadowColor:h,bool1:d,bool2:g,origin:m,elastic:u,dura:f}=this.datos;this.texto=this.relatedScene.add.text(t,e,s,{fontSize:a+"px",fill:i,fontFamily:"verdana, arial, sans-serif",fontStyle:o}),this.texto.setOrigin(m[0],m[1]),this.texto.setStroke(r,n),this.texto.setShadow(c,l,h,2,d,g),this.elastic(s,u,f),console.log(this.texto)}elastic(t,e,s){s>0&&this.relatedScene.tweens.add({targets:this.texto,y:e,ease:"Elastic",duration:s})}get(){return this.texto}}class r extends s.Scene{constructor(){super("Boot")}init(){this.txt=new o(this,{x:Math.floor(this.sys.game.config.width/2),y:Math.floor(this.sys.game.config.height/2),txt:" Touch screen or \n \n click to start... ",size:60,color:"#ffa",style:"bold",stroke:"#fb1",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0})}preload(){this.load.image("fondo","assets/img/bg.png")}create(){this.add.image(0,0,"fondo").setOrigin(0,0),this.txt.create(),this.input.on("pointerdown",(()=>this.scene.start("Preloader"))),console.log(this.txt)}}class n{constructor(t,e){this.relatedScene=t,this.datos=e}create(){const{x:t,y:e,size:s,txt:a,color:o,strokeColor:r,id:n}=this.datos;let c="";0===n&&(c=`${a}${i.getPuntos()}`),1===n&&(c=`${a}${i.getNivel()}`),2===n&&(c=`${a}${i.getRecord()}`),this.marcador=this.relatedScene.add.text(t,e,c,{fontSize:s+"px",fill:o,fontFamily:"verdana, arial, sans-serif",fontStyle:"bold"}),this.marcador.setStroke(r,16).setShadow(2,2,"#111111",2,!1,!0),console.log(this.marcador)}update(t,e){this.marcador.setText(`${t}${e}`)}get(){return this.marcador}}class c{}e(c,"array_levels",[[[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,1,1,1,1,1,1,1,1,9,1,1,1,1,1,1,1,1,9],[9,1,9,9,1,9,9,9,1,9,1,9,9,9,1,9,9,1,9],[9,1,9,9,1,9,9,9,1,9,1,9,9,9,1,9,9,1,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,1,9,9,1,9,1,9,9,9,9,9,1,9,1,9,9,1,9],[9,1,1,1,1,9,1,1,1,9,1,1,1,9,1,1,1,1,9],[9,9,9,9,1,9,9,9,1,9,1,9,9,9,1,9,9,9,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,1,9,9,1,9,1,9,1,9,1,9,1,9,1,9,9,1,9],[9,1,9,9,1,9,1,9,1,9,1,9,1,9,1,9,9,1,9],[9,1,1,1,1,9,1,1,1,1,1,1,1,9,1,1,1,1,9],[9,1,9,9,1,9,1,9,9,9,9,9,1,9,1,9,9,1,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,18,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,1,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,18,1,1,18,1,18,1,1,1,1],[18,18,18,18,18,18,18,1,18,18,18,1,18,18,18,18,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,1,18,18,18,18,18,18,18,18,18,18,18,1,18,18,1,1],[1,1,18,1,18,1,18,1,1,1,1,1,18,1,18,1,18,1,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,18,1,1,1,1,1,1,18,1,18,1,1,1,1,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,18,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,1,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,18,1,1,18,1,18,1,1,1,1],[18,18,18,18,18,18,18,1,18,18,18,1,18,18,18,18,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,1,18,18,18,18,18,18,18,18,18,18,18,1,18,18,1,1],[1,1,18,1,18,1,18,1,1,1,1,1,18,1,18,1,18,1,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,18,1,1,1,1,1,1,18,1,18,1,1,1,1,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,18,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,1,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,18,1,1,18,1,18,1,1,1,1],[18,18,18,18,18,18,18,1,18,18,18,1,18,18,18,18,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,1,18,18,18,18,18,18,18,18,18,18,18,1,18,18,1,1],[1,1,18,1,18,1,18,1,1,1,1,1,18,1,18,1,18,1,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,18,1,1,1,1,1,1,18,1,18,1,1,1,1,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,18,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,1,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,18,1,1,18,1,18,1,1,1,1],[18,18,18,18,18,18,18,1,18,18,18,1,18,18,18,18,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,1,18,18,18,18,18,18,18,18,18,18,18,1,18,18,1,1],[1,1,18,1,18,1,18,1,1,1,1,1,18,1,18,1,18,1,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,18,1,1,1,1,1,1,18,1,18,1,1,1,1,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,18,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,1,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,18,1,1,18,1,18,1,1,1,1],[18,18,18,18,18,18,18,1,18,18,18,1,18,18,18,18,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,1,18,18,18,18,18,18,18,18,18,18,18,1,18,18,1,1],[1,1,18,1,18,1,18,1,1,1,1,1,18,1,18,1,18,1,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,18,1,1,1,1,1,1,18,1,18,1,1,1,1,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,18,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,1,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,18,1,1,18,1,18,1,1,1,1],[18,18,18,18,18,18,18,1,18,18,18,1,18,18,18,18,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,1,18,18,18,18,18,18,18,18,18,18,18,1,18,18,1,1],[1,1,18,1,18,1,18,1,1,1,1,1,18,1,18,1,18,1,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,18,1,1,1,1,1,1,18,1,18,1,1,1,1,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,18,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,1,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,18,1,1,18,1,18,1,1,1,1],[18,18,18,18,18,18,18,1,18,18,18,1,18,18,18,18,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,1,18,18,18,18,18,18,18,18,18,18,18,1,18,18,1,1],[1,1,18,1,18,1,18,1,1,1,1,1,18,1,18,1,18,1,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,18,1,1,1,1,1,1,18,1,18,1,1,1,1,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,18,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,1,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,18,1,1,18,1,18,1,1,1,1],[18,18,18,18,18,18,18,1,18,18,18,1,18,18,18,18,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,1,18,18,18,18,18,18,18,18,18,18,18,1,18,18,1,1],[1,1,18,1,18,1,18,1,1,1,1,1,18,1,18,1,18,1,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,18,1,1,1,1,1,1,18,1,18,1,1,1,1,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,18,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,1,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,18,1,1,18,1,18,1,1,1,1],[18,18,18,18,18,18,18,1,18,18,18,1,18,18,18,18,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,1,18,18,18,18,18,18,18,18,18,18,18,1,18,18,1,1],[1,1,18,1,18,1,18,1,1,1,1,1,18,1,18,1,18,1,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,18,1,1,1,1,1,1,18,1,18,1,1,1,1,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,18,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,1,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,18,1,1,18,1,18,1,1,1,1],[18,18,18,18,18,18,18,1,18,18,18,1,18,18,18,18,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,1,18,18,18,18,18,18,18,18,18,18,18,1,18,18,1,1],[1,1,18,1,18,1,18,1,1,1,1,1,18,1,18,1,18,1,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,18,1,1,1,1,1,1,18,1,18,1,1,1,1,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,18,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,1,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,18,1,1,18,1,18,1,1,1,1],[18,18,18,18,18,18,18,1,18,18,18,1,18,18,18,18,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,1,18,18,18,18,18,18,18,18,18,18,18,1,18,18,1,1],[1,1,18,1,18,1,18,1,1,1,1,1,18,1,18,1,18,1,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,18,1,1,1,1,1,1,18,1,18,1,1,1,1,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,18,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,1,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,18,1,1,18,1,18,1,1,1,1],[18,18,18,18,18,18,18,1,18,18,18,1,18,18,18,18,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,1,18,18,18,18,18,18,18,18,18,18,18,1,18,18,1,1],[1,1,18,1,18,1,18,1,1,1,1,1,18,1,18,1,18,1,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,18,1,1,1,1,1,1,18,1,18,1,1,1,1,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,18,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,1,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,18,1,1,18,1,18,1,1,1,1],[18,18,18,18,18,18,18,1,18,18,18,1,18,18,18,18,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,1,18,18,18,18,18,18,18,18,18,18,18,1,18,18,1,1],[1,1,18,1,18,1,18,1,1,1,1,1,18,1,18,1,18,1,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,18,1,1,1,1,1,1,18,1,18,1,1,1,1,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,18,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,1,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,18,1,1,18,1,18,1,1,1,1],[18,18,18,18,18,18,18,1,18,18,18,1,18,18,18,18,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,1,18,18,18,18,18,18,18,18,18,18,18,1,18,18,1,1],[1,1,18,1,18,1,18,1,1,1,1,1,18,1,18,1,18,1,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,18,1,1,1,1,1,1,18,1,18,1,1,1,1,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]]);class l{constructor(t){this.relatedScene=t}create(){console.log(c.array_levels.length);const t=i.getNivel();this.tile=this.relatedScene.physics.add.staticGroup();for(let e=0;e<c.array_levels[t].length;e++)for(let s=0;s<c.array_levels[t][0].length;s++){const a=c.array_levels[t][e][s];this.elegir_tilesNiveles(a,t,e,s)}console.log(this.tile)}static check_colision(t,e){const s=i.getNivel();return c.array_levels[s][e][t]<=12}elegir_tilesNiveles(t,e,s,a){const o=i.getScaleGame();t<=12&&this.tile.create(a*i.tileXY.x*o,s*i.tileXY.y*o,"tile-pacman-marron").setScale(i.tileXY.y*o/64)}get(){return this.tile}}function h(t,e){y(e,this),this.marcadorPtos.update(i.getTxtScore(),i.getPuntos()),e.disableBody(!0,!0),x(this.sonido_waka,!1,.9)}function d(t,e){console.log(t,e),y(e,this),this.marcadorPtos.update(i.getTxtScore(),i.getPuntos()),e.disableBody(!0,!0),i.setFantasmasScary(!0);const s=i.getNivel();this.time.delayedCall(i.getFantasmasScaryDuracion()[s],(()=>{i.setFantasmasScary(!1),i.setFantasmasIntermitente(!1),this.fantasmas.clear_tint(),this.fantasmas.get().setBlendMode("ERASE"),this.sonido_fantasmasScary.pause(),i.setFantasmasBonusInc(0)}));const a=Math.floor(i.getFantasmasScaryDuracion()[s]/1.5);this.time.delayedCall(a,(()=>i.setFantasmasIntermitente(!0))),x(this.sonido_eatingGhost,!1,.9),this.time.delayedCall(500,(()=>x(this.sonido_fantasmasScary,!0,.9)))}function g(){return!i.isFantasmasScary()}function m(t,e){console.log("colision...jugador-enemigo"),console.log(t,e);const s=i.getScaleGame();if(i.isFantasmasScary()){x(this.sonido_eatingGhost,!1,.9),e.setVisible(!1),this.ojos.get().getChildren()[e.getData("id")].setVisible(!0),i.setPausaComeFantasma(!0),this.time.delayedCall(i.pausa.comeFantasma.duracion,(()=>{i.setPausaComeFantasma(!1)}));const a=i.getFantasmasBonusInc().contador,r=i.getFantasmasBonusInc().puntos[a],n=i.getFantasmasBonusInc().color[a],c=i.getFantasmasBonusInc().duracion;this.txt_bonusfantasmas=new o(this,{x:t.x,y:t.y,txt:r,size:40,color:"#ff7",style:"bold",stroke:n,sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:t.y-i.tileXY.y*s,dura:2e3}),this.txt_bonusfantasmas.create(),this.txt_bonusfantasmas.get().setDepth(i.depth.textos).setAlpha(1),this.tweens.add({targets:this.txt_bonusfantasmas.get(),alpha:0,duration:c});const l=i.getPuntos()+r;i.setPuntos(l),this.marcadorPtos.update(i.getTxtScore(),i.getPuntos()),i.setFantasmasBonusInc(a+1),a>=4&&i.setFantasmasBonusInc(0)}else x(this.sonido_jugadorDies,!1,.7),this.jugadordies.create(t.x,t.y),t.disableBody(!0,!0),this.add.timeline([{at:i.pausa.pacmanDies.duracion,run:()=>{this.jugadordies.get().disableBody(!0,!0),this.jugador.get().enableBody(!0,i.pacman.iniX*(i.tileXY.x*s),i.pacman.iniY*(i.tileXY.x*s),!0,!0),this.jugador.intentoGiro="right",this.jugador.direccion="right",function(){const t=i.getVidas()-1;i.setVidas(t)}(),i.getVidas()<0?(i.setGameOver(!0),this.jugador.get().setVisible(!1),this.gameover.create(this.jugador.get().x,this.jugador.get().y)):this.jugadorshowvidas.get().children.iterate(((t,e)=>{e===i.getVidas()&&t.setVisible(!1)})),this.fantasmas.get().children.iterate(((t,e)=>{i.isGameOver()?t.setVisible(!1):(t.setX(i.fantasmasIniXY[Object.keys(i.fantasmasIniXY)[e]][0]*(i.tileXY.x*s)),t.setY(i.fantasmasIniXY[Object.keys(i.fantasmasIniXY)[e]][1]*(i.tileXY.y*s)))}))}}]).play()}function u(t,e){return!(!e.visible||i.isInvisible())}function f(t,e){console.log(t,e),y(e,this),this.marcadorPtos.update(i.getTxtScore(),i.getPuntos()),e.disableBody(!0,!0),x(this.sonido_eatingCherry,!1,.9),this.txt_bonuscerezas=new o(this,{x:t.x,y:t.y,txt:e.getData("puntos").toString(),size:40,color:"#ffa",style:"bold",stroke:"#f51",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:t.y-i.tileXY.y,dura:2e3}),this.txt_bonuscerezas.create(),this.txt_bonuscerezas.get().setDepth(i.depth.textos).setAlpha(1),this.tweens.add({targets:this.txt_bonuscerezas.get(),alpha:0,duration:i.getFantasmasBonusInc().duracion}),this.time.delayedCall(i.getIntervaloCerezas(),(()=>{this.cerezas.get().enableBody(!0,i.getCerezasIniXY()[0]*(i.tileXY.x*i.getScaleGame()),i.getCerezasIniXY()[1]*(i.tileXY.y*i.getScaleGame()),!0,!0)}))}function p(t,e,s,a,o,r,n,c,l,h){const d=h.add.particles(t,e,s,{speed:a,lifespan:o,scale:r,tint:n,blendMode:"ADD"});d.setDepth(i.depth.efectos),l&&d.startFollow(c)}function y(t,e){const s=i.getPuntos()+t.getData("puntos");i.setPuntos(s),e.marcadorPtos.update(i.getTxtScore(),i.getPuntos())}function x(t,e,s){t.volume=s,t.loop=e,t.play()}class S{constructor(t){this.relatedScene=t}create(){const t=i.puntitosGordos,e=[[i.pacman.iniY,i.pacman.iniX],[t.uple],[t.upri],[t.dole],[t.dori],[1,1],[1,17],[16,1],[16,17],[12,0],[12,1],[12,2],[12,3],[12,15],[12,16],[12,17],[12,18],[10,0],[10,18],[8,0],[8,1],[8,2],[8,3],[8,15],[8,16],[8,17],[8,18]],s=i.getScaleGame(),a=i.getNivel();this.puntito=this.relatedScene.physics.add.staticGroup();for(let o=0;o<c.array_levels[a].length;o++)for(let t=0;t<c.array_levels[a][o].length;t++)if(c.array_levels[a][o][t]>12){if(e.some((e=>o===e[0]&&t===e[1])))continue;this.puntito.create(t*i.tileXY.x*s,o*i.tileXY.y*s,"puntito").setScale(.6).setDepth(i.depth.puntitos).setData("puntos",10).refreshBody()}console.log(this.puntito)}get(){return this.puntito}}class b{constructor(t){this.relatedScene=t}create(){const t=i.puntitosGordos,e=i.getScaleGame(),s=i.tileXY.x/512*e,a=i.tileXY.y/512*e;this.puntitosgordos=this.relatedScene.physics.add.staticGroup(),Object.keys(t).forEach((o=>{this.puntitosgordos.create(t[o][1]*(i.tileXY.x*e),t[o][0]*(i.tileXY.y*e),"particula1").setData("puntos",50).setScale(s,a).setBlendMode("ADD").refreshBody()})),this.relatedScene.tweens.add({targets:this.puntitosgordos.getChildren(),scale:2*s,yoyo:!0,duration:900,repeat:-1}),console.log(this.puntitosgordos)}get(){return this.puntitosgordos}}const w=class t{constructor(t){this.relatedScene=t}create(t,e){const s=i.getScaleGame();this.jugador=this.relatedScene.physics.add.sprite(t,e,"pacman"),this.jugador.setCircle(Math.floor(i.tileXY.y*s/2.5),Math.floor(i.tileXY.x*s/6),Math.floor(i.tileXY.y*s/6)),this.jugador.setDepth(i.depth.jugador).setAngle(0),this.jugador.setScale(i.tileXY.y*s/64),this.jugador.setData("intento-giro","right"),this.intentoGiro="right",this.direccion=this.intentoGiro,this.relatedScene.anims.remove("le-ri-up-do"),this.relatedScene.anims.create({key:"le-ri-up-do",frames:this.relatedScene.anims.generateFrameNumbers("pacman",{start:0,end:6}),frameRate:30,yoyo:!0,repeat:-1}),this.jugador.anims.play("le-ri-up-do",!0),this.controles=this.relatedScene.input.keyboard.createCursorKeys(),console.log(this.jugador)}update(){if(!this.jugador.body.enable||i.isPausaComeFantasma()||i.isNivelSuperado())return;const e=i.getConfig().vel,s=i.getScaleGame(),a=t.INFO_DIRECCION;if(Object.keys(t.INFO_DIRECCION).forEach((t=>{this.controles[t].isDown&&(this.intentoGiro=t),i.controlElegido.mobile&&(this.relatedScene.crucetaup.isDown?this.intentoGiro="up":this.relatedScene.crucetado.isDown?this.intentoGiro="down":this.relatedScene.crucetale.isDown?this.intentoGiro="left":this.relatedScene.crucetari.isDown&&(this.intentoGiro="right"))})),this.jugador.x%(i.tileXY.x*s)==0&&this.jugador.y%(i.tileXY.y*s)==0){const t=Math.floor(this.jugador.x/(i.tileXY.x*s))+a[this.intentoGiro][0],e=Math.floor(this.jugador.y/(i.tileXY.y*s))+a[this.intentoGiro][1];l.check_colision(t,e)||(this.direccion=this.intentoGiro,this.jugador.setAngle(a[this.direccion][4]))}const o=a[this.direccion][2]*(i.tileXY.x*s-t.VEL*e),r=a[this.direccion][3]*(i.tileXY.y*s-t.VEL*e),n=a[this.direccion][0]*(t.VEL*e),h=a[this.direccion][1]*(t.VEL*e),d=Math.floor((this.jugador.x+n+o)/(i.tileXY.x*s)),g=Math.floor((this.jugador.y+h+r)/(i.tileXY.y*s));if(!l.check_colision(d,g)){this.jugador.x+=a[this.direccion][0]*(t.VEL*e),this.jugador.y+=a[this.direccion][1]*(t.VEL*e);const o=i.getNivel();this.jugador.x>c.array_levels[o][0].length*(i.tileXY.x*s)&&a[this.direccion][0]>0&&(this.jugador.x=-i.tileXY.x*s),this.jugador.x<-i.tileXY.x*s&&a[this.direccion][0]<0&&(this.jugador.x=(c.array_levels[o][0].length-1)*(i.tileXY.x*s))}}get(){return this.jugador}};e(w,"VEL",2),e(w,"INFO_DIRECCION",{left:[-1,0,0,0,180],right:[1,0,1,0,0],up:[0,-1,0,0,270],down:[0,1,0,1,90]});let v=w;class X{constructor(t){this.relatedScene=t}create(t,e){i.getVidas()>=0?(this.jugadordies=this.relatedScene.physics.add.sprite(t,e,"pacman-dies",0),this.jugadordies.setScale(i.getScaleGame()),3===i.getVidas()&&this.relatedScene.anims.create({key:"dies-anim",frames:this.relatedScene.anims.generateFrameNumbers("pacman-dies",{start:0,end:11}),frameRate:9,hideOnComplete:!0}),this.jugadordies.anims.play("dies-anim",!0)):(this.jugadordies=this.relatedScene.physics.add.sprite(t,e,"pacman"),this.jugadordies.setFrame(4),this.relatedScene.tweens.add({targets:this.jugadordies,angle:359,duration:1e3,repeat:2})),console.log(this.jugadordies)}get(){return this.jugadordies}}class Y{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{left:t,top:e}=this.args;this.jugadorshowvidas=this.relatedScene.physics.add.group({key:["pacman"],frameQuantity:i.getVidas(),setXY:{x:t,y:e,stepX:i.tileXY.x*i.getScaleGame()},frame:4}),this.jugadorshowvidas.children.iterate((t=>{t.setOrigin(.5,0).setScale(1,.7).setBlendMode(Phaser.BlendModes.ADD)})),console.log(this.jugadorshowvidas)}get(){return this.jugadorshowvidas}}const D=class t{constructor(t){this.relatedScene=t}create(){const t=i.getScaleGame();this.fantasmas=this.relatedScene.physics.add.group({key:["fantanim0","fantanim1","fantanim2"],frameQuantity:1,setXY:{x:i.fantasmasIniXY.azul[0]*i.tileXY.x*t,y:i.fantasmasIniXY.azul[1]*i.tileXY.y*t,stepX:i.tileXY.x*t}}),this.fantasmas.create(i.fantasmasIniXY.pink[0]*i.tileXY.x*t,i.fantasmasIniXY.pink[1]*i.tileXY.y*t,"fantanim3"),this.fantasmas.children.iterate(((e,s)=>{e.setData("intentoGiro","right"),e.setData("direccion","right"),e.setData("id",s),e.setCircle(Math.floor(i.tileXY.y/2.6),Math.floor(i.tileXY.x/6),Math.floor(i.tileXY.y/6)),e.setAngle(0).setScale(t).setDepth(i.depth.fantasmas),e.setFrame(0).setFlipX(!1)})),this.fantasmas.children.iterate(((t,e)=>{for(let s=0;s<4;s++)this.relatedScene.anims.remove(`anim${e}${s}`),this.relatedScene.anims.create({key:`anim${e}${s}`,frames:this.relatedScene.anims.generateFrameNumbers(`fantanim${e}${s}`,{start:0,end:1}),frameRate:8,yoyo:!0,repeat:-1});t.anims.play(`anim${e}0`,!0)})),console.log(this.fantasmas)}update(){if(!this.relatedScene.jugador.get().body.enable||i.isPausaComeFantasma()||i.isNivelSuperado())return;const e=t.INFO_DIRECCION;this.fantasmas.children.iterate(((s,a)=>{i.isFantasmasScary()&&(i.isFantasmasIntermitente()?s.setTint(new Phaser.Display.Color(20,Phaser.Math.Between(60,200),Phaser.Math.Between(125,255)).color):s.setTintFill(new Phaser.Display.Color(9,225,255).color));let o,r=0,n=0;const h=i.getScaleGame();for(let e=0;e<t.ptosClave.length;e++){let r=t.ptosClave[e][0]*i.tileXY.x*h,n=t.ptosClave[e][1]*i.tileXY.y*h;s.x==r&&s.y==n&&(o=Phaser.Math.Between(0,10),o<Math.floor(7+i.getNivel()/5)&&(this.fantasma_persigue(s),this.set_flips(s,a)))}if(r=Math.floor((s.x+e[s.getData("direccion")][0]+i.tileXY.x*h*e[s.getData("direccion")][2])/(i.tileXY.x*h)),n=Math.floor((s.y+e[s.getData("direccion")][1]+i.tileXY.y*h*e[s.getData("direccion")][3])/(i.tileXY.y*h)),l.check_colision(r,n))o=Phaser.Math.Between(0,10),o<Math.floor(6+i.getNivel()/5)?this.fantasma_persigue(s):s.setData("direccion",this.elegir_otra_direccion(e,s)),this.set_flips(s,a);else{s.x+=e[s.getData("direccion")][0]*(t.VEL*i.getConfig().vel),s.y+=e[s.getData("direccion")][1]*(t.VEL*i.getConfig().vel);const a=i.getNivel();s.x>c.array_levels[a][0].length*(i.tileXY.x*h)&&"right"===s.getData("direccion")&&(s.x=-i.tileXY.x*h),s.x<-i.tileXY.x*h&&"left"===s.getData("direccion")&&(s.x=(c.array_levels[a][0].length-1)*(i.tileXY.x*h))}}))}elegir_otra_direccion(e,s){let a=e[s.getData("direccion")][5];return t.OTRA_DIRECCION_RND[a][Math.floor(3*Math.random())]}fantasma_persigue(t){Phaser.Math.Between(0,10)<5?t.y<this.relatedScene.jugador.get().y?t.setData("direccion","down"):t.setData("direccion","up"):t.x<this.relatedScene.jugador.get().x?t.setData("direccion","right"):t.setData("direccion","left")}set_flips(t,e){"left"===t.getData("direccion")?t.anims.play(`anim${e}1`,!0):"right"===t.getData("direccion")?t.anims.play(`anim${e}0`,!0):"up"===t.getData("direccion")?t.anims.play(`anim${e}2`,!0):"down"===t.getData("direccion")&&t.anims.play(`anim${e}3`,!0)}static duracion_scary(){let t=i.getFantasmasScaryDuracion()-900*i.getNivel();return console.log(t),t<1900?1900:t}clear_tint(){this.fantasmas.children.iterate((t=>{t.visible?t.clearTint():(t.setVisible(!0).clearTint(),this.relatedScene.ojos.get().getChildren()[t.getData("id")].setVisible(!1))}))}get(){return this.fantasmas}};e(D,"VEL",2),e(D,"INFO_DIRECCION",{left:[-1,0,0,0,180,"left"],right:[1,0,1,0,0,"right"],up:[0,-1,0,0,270,"up"],down:[0,1,0,1,90,"down"]}),e(D,"OTRA_DIRECCION_RND",{left:["right","up","down"],right:["left","up","down"],up:["right","left","down"],down:["right","left","up"]}),e(D,"ptosClave",[[4,1],[14,1],[4,4],[6,4],[12,4],[14,4],[10,8],[4,10],[6,10],[9,10],[12,10],[14,10],[6,12],[4,14],[6,14],[12,14],[14,14],[4,16],[8,16],[10,16],[14,16],[8,20],[10,20]]);let M=D;class _{constructor(t){this.relatedScene=t}create(){const t=i.getScaleGame();this.fantasmaspregame=this.relatedScene.physics.add.group({key:["fantanim0","fantanim1","fantanim2","fantanim3"],frameQuantity:1,setXY:{x:(i.fantasmasIniXY.azul[0]-14)*(i.tileXY.x*t),y:(i.fantasmasIniXY.azul[1]-5)*(i.tileXY.y*t),stepX:i.tileXY.x*t}}),this.fantasmaspregame.children.iterate((e=>{e.setAngle(0).setScale(t).setFrame(0).setFlipX(!1)})),this.fantasmaspregame.children.iterate(((t,e)=>{for(let s=0;s<4;s++)this.relatedScene.anims.create({key:`anim${e}${s}`,frames:this.relatedScene.anims.generateFrameNumbers(`fantanim${e}${s}`,{start:0,end:1}),frameRate:8,yoyo:!0,repeat:-1});t.anims.play(`anim${e}0`,!0),this.relatedScene.tweens.add({targets:t,x:this.relatedScene.sys.game.config.width+150,yoyo:!0,duration:9e3,repeat:-1}),setInterval((()=>{t.setFlipX(!t.flipX)}),9e3)})),console.log(this.fantasmaspregame)}}class z{constructor(t){this.relatedScene=t}create(){const t=i.getScaleGame();this.ojosfantasma=this.relatedScene.physics.add.group({key:["fantanim5","fantanim5","fantanim5","fantanim5"],frameQuantity:1,setXY:{x:(i.fantasmasIniXY.azul[0]-12)*i.tileXY.x,y:(i.fantasmasIniXY.azul[1]-7)*i.tileXY.y,stepX:i.tileXY.x*t}}),this.ojosfantasma.children.iterate((e=>{e.setAngle(0).setScale(t/4).setFrame(0).setFlipX(!1).setVisible(!1)})),this.ojosfantasma.children.iterate(((t,e)=>{for(let s=0;s<4;s++)this.relatedScene.anims.create({key:`anim5${s}`,frames:this.relatedScene.anims.generateFrameNumbers(`fantanim5${s}`,{start:0,end:1}),frameRate:8,yoyo:!0,repeat:-1});t.anims.play("anim50",!0)})),console.log(this.ojosfantasma)}update(){this.ojosfantasma.children.iterate(((t,e)=>{const s=this.relatedScene.fantasmas.get().getChildren()[e];this.set_flips(s,t),t.setX(s.x),t.setY(s.y)}))}set_flips(t,e){"left"===t.getData("direccion")?e.anims.play("anim51",!0):"right"===t.getData("direccion")?e.anims.play("anim50",!0):"up"===t.getData("direccion")?e.anims.play("anim52",!0):"down"===t.getData("direccion")&&e.anims.play("anim53",!0)}get(){return this.ojosfantasma}}const C=class t{constructor(t){this.relatedScene=t}create(){const t=i.getScaleGame(),e=i.getNivel();this.cerezas=this.relatedScene.physics.add.sprite(i.getCerezasIniXY()[0]*(i.tileXY.x*t),i.getCerezasIniXY()[1]*(i.tileXY.y*t),"frutas"),this.cerezas.setData("intentoGiro","right"),this.cerezas.setData("direccion","right"),this.cerezas.setCircle(Math.floor(i.tileXY.y/3),Math.floor(i.tileXY.x/6),Math.floor(i.tileXY.y/6)),this.cerezas.setAngle(-20).setScale(t).setFrame(0).setFlipX(!1),this.cerezas.setDepth(i.depth.item),e<14?(this.cerezas.setData("puntos",i.getBonusCerezas()[e]),e<9?this.cerezas.setFrame(e-1):this.cerezas.setFrame(7)):(this.cerezas.setData("puntos",7e3),this.cerezas.setFrame(7)),this.relatedScene.tweens.add({targets:this.cerezas,angle:20,ease:"linear",yoyo:!0,duration:2e3,repeat:-1}),console.log(this.cerezas)}update(){if(!this.relatedScene.jugador.get().body.enable)return;const e=i.getConfig().vel,s=i.getNivel(),a=i.getScaleGame(),o=t.INFO_DIRECCION,r=Math.floor((this.cerezas.x+o[this.cerezas.getData("direccion")][0]+i.tileXY.x*a*o[this.cerezas.getData("direccion")][2])/(i.tileXY.x*a)),n=Math.floor((this.cerezas.y+o[this.cerezas.getData("direccion")][1]+i.tileXY.y*a*o[this.cerezas.getData("direccion")][3])/(i.tileXY.y*a));l.check_colision(r,n)?this.cerezas.setData("direccion",this.elegir_otra_direccion(o,this.cerezas)):(this.cerezas.x+=o[this.cerezas.getData("direccion")][0]*(t.VEL*e),this.cerezas.y+=o[this.cerezas.getData("direccion")][1]*(t.VEL*e),this.cerezas.x>c.array_levels[s][0].length*(i.tileXY.x*a)&&"right"===this.cerezas.getData("direccion")&&(this.cerezas.x=-i.tileXY.x*a),this.cerezas.x<-i.tileXY.x*a&&"left"===this.cerezas.getData("direccion")&&(this.cerezas.x=(c.array_levels[s][0].length-1)*(i.tileXY.x*a)))}elegir_otra_direccion(e,s){let a=e[s.getData("direccion")][5];return t.OTRA_DIRECCION_RND[a][Math.floor(3*Math.random())]}get(){return this.cerezas}};e(C,"VEL",1),e(C,"INFO_DIRECCION",{left:[-1,0,0,0,180,"left"],right:[1,0,1,0,0,"right"],up:[0,-1,0,0,270,"up"],down:[0,1,0,1,90,"down"]}),e(C,"OTRA_DIRECCION_RND",{left:["right","up","down"],right:["left","up","down"],up:["right","left","down"],down:["right","left","up"]});let F=C;class j{constructor(t){this.relatedScene=t}create(t,e){this.sonidoGameOver=this.relatedScene.sound.add("gameover-retro");const s=t,a=e;this.txt=new o(this.relatedScene,{x:s,y:a,txt:" Game Over ",size:99,color:"#dd9",style:"bold",stroke:"#f41",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.txt.get().setAlpha(0),this.relatedScene.tweens.add({targets:this.txt.get(),alpha:1,duration:Math.floor(3500)}),this.relatedScene.add.timeline([{at:7e3,run:()=>{this.relatedScene.botonrejugar.create(),this.relatedScene.botonrejugar.get().setX(s).setY(a+i.tileXY.y*i.getScaleGame()*4),this.relatedScene.botonrejugar.txt.get().setX(s).setY(a+i.tileXY.y*i.getScaleGame()*4)}}]).play(),this.sonidoGameOver.play(),this.sonidoGameOver.volume=.5,this.check_newRecord()}update(){}check_newRecord(){console.warn("iniciando check-records"),async function(){try{const t=await fetch("https://ejemplo-node-railway-production.up.railway.app/all"),e=await t.json(),{name:s,puntuacion:a}=e;console.log(s,a),console.log(e),console.log(JSON.stringify(e))}catch(t){console.error("Error fetching data:",t)}}()}get(){return this.txt}}class I{constructor(t,e){this.relatedScene=t,this.args=e}create(){i.audio.numKey=this.relatedScene.sound.add("numkey");const{left:t,top:e,id:s,scX:a,scY:r,angle:n,originX:c,originY:l,texto:h,nextScene:d}=this.args;this.boton=this.relatedScene.add.sprite(t,e,s).setInteractive(),this.boton.setScale(a,r).setAngle(1).setDepth(i.depth.botones);let g=24;s.includes("settings")&&(g=20),this.txt=new o(this.relatedScene,{x:t,y:e,txt:h,size:g,color:"#ff1",style:"bold",stroke:"#1bd",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.txt.get().setDepth(i.depth.textos).setAlpha(1).setScale(1),this.boton.on("pointerover",(()=>{this.boton.setScale(a+.04,r+.04)})),this.boton.on("pointerout",(()=>{this.boton.setScale(a,r)})),this.boton.on("pointerdown",(t=>{x(i.audio.numKey,!1,.8),this.relatedScene.scene.start(d)})),this.relatedScene.tweens.add({targets:[this.boton,this.txt.get()],angle:359,ease:"Elastic",yoyo:!0,hold:3e3,duration:2e3,repeat:-1})}get(){return this.boton}}class O{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{x:t,y:e,id:s,orX:a,orY:o,scX:r,scY:n,ang:c}=this.args;this.boton=this.relatedScene.add.image(t,e,s).setInteractive(),this.boton.setOrigin(a,o).setScale(r,n),this.boton.setAngle(c).setFrame(0).setDepth(i.depth.marcadores),this.boton.setX(t).setY(e),this.boton.on("pointerover",(()=>{this.boton.setScale(r+.1,n+.1)})),this.boton.on("pointerout",(()=>{this.boton.setScale(r,n)})),this.boton.on("pointerdown",(()=>{this.relatedScene.scale.isFullscreen?this.relatedScene.scale.stopFullscreen():this.relatedScene.scale.startFullscreen()}))}}class k{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{x:t,y:e,id:s,orX:a,orY:o,scX:r,scY:n,ang:c,alpha:l,texto:h}=this.args;this.boton=this.relatedScene.add.image(t,e,s.slice(0,7)).setInteractive(),this.boton.setOrigin(a,o).setScale(r,n),this.boton.setAngle(c).setDepth(i.depth.controles),this.boton.setX(t).setY(e),this.isDown=!1,this.boton.on("pointerover",(()=>{this.boton.setScale(r+.05,n+.05)})),this.boton.on("pointerout",(()=>{this.boton.setScale(r,n),this.isDown=!1})),this.boton.on("pointerdown",(()=>{console.log(s),this.isDown=!0}))}get(){return this.boton}}class G extends s.Scene{constructor(){super("Game")}init(){i.setGameOver(!1),i.setNivelSuperado(!1),this.set_pausaInicial(i.getPausaInicialDuracion()),this.laberinto=new l(this),this.puntitos=new S(this),this.puntitosgordos=new b(this),this.jugador=new v(this),this.jugadordies=new X(this),this.fantasmas=new M(this),this.ojos=new z(this),this.cerezas=new F(this),this.gameover=new j(this),this.instanciar_mobileControls(),this.instanciar_marcadores(),console.log(`vel:${i.getConfig().vel}`),console.log(`invulnerability:${i.isInvisible()}`)}preload(){}create(){const t=[i.screen.escBoundsX,i.screen.escBoundsY];this.add.image(0,0,"fondo-pacman").setScale(t[0],t[1]).setDepth(i.depth.fondo).setOrigin(0,0),this.set_sonidos(),this.set_cameras(),this.set_cameras_controles(),this.set_cameras_marcadores(),this.laberinto.create(),this.puntitos.create(),this.puntitosgordos.create(),this.jugador.create(i.pacman.iniX*(i.tileXY.x*i.getScaleGame()),i.pacman.iniY*(i.tileXY.y*i.getScaleGame())),this.fantasmas.create(),this.ojos.create(),this.cerezas.create(),this.jugadorshowvidas.create(),this.marcadorPtos.create(),this.marcadorNivel.create(),this.marcadorHi.create(),this.botonfullscreen.create(),this.crucetaup.create(),this.crucetado.create(),this.crucetale.create(),this.crucetari.create(),this.hideMobileControls(),this.cameras.main.startFollow(this.jugador.get()),this.set_colliders()}update(){if(!i.isFps60()){if(i.isAllowUpdate())return void i.setAllowUpdate(!1);i.setAllowUpdate(!0)}i.isPausaInicial()||i.isGameOver()||(this.jugador.update(),this.fantasmas.update(),this.ojos.update(),this.cerezas.update()),this.puntitos.get().countActive()<=0&&!i.isNivelSuperado()&&(this.sonido_fantasmasScary.isPlaying&&this.sonido_fantasmasScary.pause(),console.log("nivel superado"),i.setNivelSuperado(!0),i.setFantasmasScary(!1),this.texto_enhorabuena(),this.time.delayedCall(i.pausa.nivelSuperado.duracion,(()=>{i.setNivelSuperado(!1),this.scene.start("Congratulations")})))}set_pausaInicial(t){i.setPausaInicial(!0),this.txtpreparado=new o(this,{x:i.pacman.iniX*(i.tileXY.x*i.getScaleGame()),y:0,txt:"Ready!",size:78,color:"#ffa",style:"bold",stroke:"#f81",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:Math.floor(this.sys.game.config.height/2),dura:2800}),this.txtpreparado.create(),this.txtpreparado.get().setDepth(i.depth.textos),this.add.timeline([{at:t,run:()=>{i.setPausaInicial(!1),this.txtpreparado.get().setVisible(!1),this.set_txtGo()}}]).play(),console.log(this.txtpreparado)}set_txtGo(){const t=new o(this,{x:i.pacman.iniX*(i.tileXY.x*i.getScaleGame()),y:Math.floor(this.sys.game.config.height/2),txt:" Go! ",size:90,color:"#ffa",style:"bold",stroke:"#cb1",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0});t.create(),t.get().setDepth(i.depth.textos),this.tweens.add({targets:t.get(),alpha:0,duration:1200})}texto_enhorabuena(){this.txtcongrats=new o(this,{x:Math.floor(this.sys.game.config.width/1.8),y:0,txt:" Congratulations! ",size:70,color:"#ffa",style:"bold",stroke:"#5f1",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:this.jugador.get().y-i.tileXY.y,dura:i.pausa.nivelSuperado.duracion}),this.txtcongrats.create(),this.txtcongrats.get().setDepth(i.depth.textos)}set_colliders(){this.physics.add.collider(this.jugador.get(),this.puntitos.get(),h,null,this),this.physics.add.overlap(this.jugador.get(),this.puntitosgordos.get(),d,g,this),this.physics.add.overlap(this.jugador.get(),this.cerezas.get(),f,null,this),this.physics.add.overlap(this.jugador.get(),this.fantasmas.get(),m,u,this)}hideMobileControls(){console.log(i.controlElegido),i.controlElegido.mobile||(this.crucetale.get().setVisible(!1),this.crucetari.get().setVisible(!1),this.crucetaup.get().setVisible(!1),this.crucetado.get().setVisible(!1))}set_cameras(){this.cameras.main.setBounds(0,-Math.floor(i.tileXY.y/2),Math.floor(this.sys.game.config.width*i.screen.escBoundsX),Math.floor(this.sys.game.config.height*i.screen.escBoundsY+Math.floor(i.tileXY.y/2))),this.physics.world.setBounds(0,-Math.floor(i.tileXY.y/2),Math.floor(this.sys.game.config.width*i.screen.escBoundsX),Math.floor(this.sys.game.config.height*i.screen.escBoundsY+Math.floor(i.tileXY.y/2)))}set_cameras_controles(){var{x:t,y:e,ancho:s,alto:a,scrollX:o,scrollY:r}=i.getCameraControles();this.mapa_controles=this.cameras.add(t,e,s,a).setZoom(.9).setName("view-controls").setAlpha(1).setOrigin(0,0),this.mapa_controles.scrollX=o,this.mapa_controles.scrollY=r}set_cameras_marcadores(){var{x:t,y:e,ancho:s,alto:a,scrollX:o,scrollY:r}=i.getCameraScores();this.mapa_scores=this.cameras.add(t,e,s,a).setZoom(.6).setName("view-scores").setAlpha(1).setOrigin(0,0),this.mapa_scores.scrollX=o,this.mapa_scores.scrollY=r}instanciar_marcadores(){const t=this.sys.game.config.width;this.sys.game.config.height;this.jugadorshowvidas=new Y(this,{left:Math.floor(1.44*t),top:-90}),this.marcadorPtos=new n(this,{x:10,y:-99,size:40,txt:i.getTxtScore(),color:"#fff",strokeColor:"#af1",id:0}),this.marcadorNivel=new n(this,{x:Math.floor(t/2),y:-99,size:40,txt:" Level: ",color:"#ff5",strokeColor:"#16d",id:1}),this.marcadorHi=new n(this,{x:Math.floor(t/1.2),y:-99,size:40,txt:" Record: ",color:"#fff",strokeColor:"#af1",id:2}),this.botonfullscreen=new O(this,{x:Math.floor(1.3*t),y:-92,id:"boton-fullscreen",orX:0,orY:0,scX:1.2,scY:.8,ang:0}),this.botonrejugar=new I(this,{left:Math.floor(this.sys.game.config.width/2),top:Math.floor(this.sys.game.config.height/1.3),id:"boton-nueva-partida",scX:.6,scY:.5,angle:1,originX:.5,originY:.5,texto:" Continue ",nextScene:"PreGame"})}instanciar_mobileControls(){const t=-1e3,e=[128,128],s=20;this.crucetaup=new k(this,{x:e[0]+s,y:t,id:"cruceta-up",orX:.5,orY:.5,scX:1,scY:1,ang:0,alpha:.8,texto:""}),this.crucetado=new k(this,{x:e[0]+s,y:t+e[1]+s,id:"cruceta-do",orX:.5,orY:.5,scX:1,scY:1,ang:180,alpha:.8,texto:""}),this.crucetale=new k(this,{x:0,y:t+e[1]+s,id:"cruceta-le",orX:.5,orY:.5,scX:1,scY:1,ang:270,alpha:.8,texto:""}),this.crucetari=new k(this,{x:2*(e[0]+s),y:t+e[1]+s,id:"cruceta-ri",orX:.5,orY:.5,scX:1,scY:1,ang:90,alpha:.8,texto:""})}set_sonidos(){this.sonido_preparado=this.sound.add("pacman-inicio-nivel"),x(this.sonido_preparado,!1,.7),this.sonido_youWin=this.sound.add("you-win"),this.sonido_key=this.sound.add("key"),this.sonido_numkey=this.sound.add("numkey"),this.sonido_waka=this.sound.add("pacman-waka"),this.sonido_jugadorDies=this.sound.add("pacman-dies"),this.sonido_eatingGhost=this.sound.add("pacman-eating-ghost"),this.sonido_eatingCherry=this.sound.add("pacman-eating-cherry"),this.sonido_fantasmasScary=this.sound.add("pacman-azules")}}class P{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{left:t,top:e,addLeft:s,orX:a,orY:r,frame:n,scale:c,txtSize:l,texto:h,id:d}=this.args;this.radiobutton=this.relatedScene.add.sprite(t,e,"radio-buttons").setInteractive(),this.radiobutton.setOrigin(a,r).setScale(c).setDepth(i.depth.textos).setFrame(n),this.radiobutton.setData("id",d),this.txt=new o(this.relatedScene,{x:t+60+s,y:e,txt:h,size:l,color:"#ffa",style:"bold",stroke:"#fa1",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[a,r],elastic:!1,dura:0}),this.txt.create(),this.radiobutton.on("pointerover",(()=>{this.txt.get().setScale(c+.1),this.radiobutton.setScale(c+.1)})),this.radiobutton.on("pointerout",(()=>{this.txt.get().setScale(c),this.radiobutton.setScale(c)})),this.radiobutton.on("pointerdown",(t=>{d.includes("FPS")?this.relatedScene.radioFps.forEach((t=>t.get().setFrame(0))):d.includes("control")?this.relatedScene.radiobuttons.forEach((t=>t.get().setFrame(0))):d.includes("velocity")?this.relatedScene.radioSpeed.forEach((t=>t.get().setFrame(0))):d.includes("mode")&&this.relatedScene.radioInvulnerability.forEach((t=>t.get().setFrame(0))),this.radiobutton.setFrame(1),d.includes("FPS")?i.isFps60()?i.setFps60(!1):i.setFps60(!0):d.includes("control")?(Object.keys(i.controlElegido).forEach((t=>{i.controlElegido[t]=!1})),i.controlElegido[this.radiobutton.getData("id").slice(0,-8)]=!0,console.log(i.controlElegido.mobile,i.controlElegido.keyboard)):d.includes("velocity")?i.setConfigVel(parseInt(d.slice(0,1))):d.includes("mode")&&(i.isInvisible()?i.setInvisible(!1):i.setInvisible(!0)),console.log(i.isFps60())}))}get(){return this.radiobutton}}class N extends s.Scene{constructor(){super("PreGame")}init(){i.setPuntos(0),i.setNivel(1),i.setVidas(3),i.setGameOver(!1),i.setNivelSuperado(!1),i.controlElegido.mobile=!1,i.controlElegido.keyboard=!0,this.botoninicio=new I(this,{left:Math.floor(this.sys.game.config.width/2),top:Math.floor(this.sys.game.config.height/1.3),id:"boton-nueva-partida",scX:.6,scY:.5,angle:1,originX:.5,originY:.5,texto:" Start ",nextScene:"Game"}),this.botonmoresettings=new I(this,{left:Math.floor(this.sys.game.config.width/1.15),top:Math.floor(this.sys.game.config.height/1.2),id:"boton-more-settings",scX:.6,scY:.8,angle:0,originX:.5,originY:.5,texto:"  More\nSettings",nextScene:"More-Settings"}),this.radiobuttons=[],this.radiobuttons.push(new P(this,{left:Math.floor(this.sys.game.config.width/15),top:Math.floor(this.sys.game.config.height/6),addLeft:0,orX:0,orY:.5,frame:1,scale:1,txtSize:50,texto:" Keyboard cursors ",id:"keyboard-control"})),this.radiobuttons.push(new P(this,{left:Math.floor(this.sys.game.config.width/15),top:Math.floor(this.sys.game.config.height/3.2),addLeft:0,orX:0,orY:.5,frame:0,scale:1,txtSize:50,texto:" Mobile controls ",id:"mobile-control"})),this.radioFps=[],this.radioFps.push(new P(this,{left:Math.floor(this.sys.game.config.width/10),top:Math.floor(this.sys.game.config.height/1.8),addLeft:52,orX:.5,orY:.5,frame:0,scale:.9,txtSize:40,texto:"30FPS",id:"30FPS"})),this.radioFps.push(new P(this,{left:Math.floor(this.sys.game.config.width/1.6),top:Math.floor(this.sys.game.config.height/1.8),addLeft:52,orX:.5,orY:.5,frame:1,scale:.9,txtSize:40,texto:"60 FPS",id:"60FPS"}))}create(){this.add.image(0,0,"fondo-pacman").setDepth(i.depth.fondo).setOrigin(0,0),this.radiobuttons.forEach((t=>t.create())),this.radioFps.forEach((t=>t.create())),this.botonmoresettings.create(),this.botoninicio.create()}}class E{constructor(t){this.relatedScene=t}create(t,e){this.jugadorpregame=this.relatedScene.physics.add.sprite(t,e,"pacman"),this.jugadorpregame.setAngle(0),this.relatedScene.anims.create({key:"le-ri-up-do",frames:this.relatedScene.anims.generateFrameNumbers("pacman",{start:0,end:6}),frameRate:30,yoyo:!0,repeat:-1}),this.jugadorpregame.anims.play("le-ri-up-do",!0),this.relatedScene.tweens.add({targets:this.jugadorpregame,x:this.relatedScene.sys.game.config.width+2*i.tileXY.x,yoyo:!0,duration:8e3,repeat:-1}),setInterval((()=>{this.jugadorpregame.setFlipX(!this.jugadorpregame.flipX)}),8e3),console.log(this.jugadorpregame)}}class B extends s.Scene{constructor(){super("MainMenu")}init(){this.intermision=this.sound.add("pacman-intermision"),this.jugador=new E(this),this.botoninicio=new I(this,{left:Math.floor(this.sys.game.config.width/2),top:Math.floor(this.sys.game.config.height/1.3),id:"boton-nueva-partida",scX:.6,scY:.5,angle:1,originX:.5,originY:.5,texto:" New Game ",nextScene:"PreGame"}),this.txt=new o(this,{x:Math.floor(this.sys.game.config.width/2),y:0,txt:" PacClon ",size:120,color:"#ffa",style:"bold",stroke:"#fa1",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:Math.floor(this.sys.game.config.height/4),dura:3e3}),this.txtRecords=new o(this,{x:Math.floor(this.sys.game.config.width/2),y:0,txt:" Tabla records ",size:20,color:"#ffa",style:"bold",stroke:"#5e1",sizeStroke:7,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:Math.floor(this.sys.game.config.height/2),dura:3e3}),this.fantasmaspregame=new _(this)}preload(){}create(){this.hacerFetchRecords=async()=>async function(){try{const t=await fetch("https://ejemplo-node-railway-production.up.railway.app/all"),e=await t.json(),s=JSON.stringify(e);console.log(e),console.log(s);let a=[];return e.forEach(((t,e)=>{const{name:s,puntuacion:i}=t;a.push(s),a.push(i.toString())})),console.log(a),a}catch(t){console.error("Error fetching data:",t)}}(),this.recordsTxtData=this.hacerFetchRecords(),this.add.image(0,0,"fondo-pacman").setOrigin(0,0).setDepth(i.depth.fondo),this.jugador.create(-150,Math.floor(this.sys.game.config.height/1.7)),this.fantasmaspregame.create(),this.txt.create(),this.txtRecords.create(),this.txtRecords.get().setVisible(!1),console.log(this.txtRecords.get().visible),this.add.text(Math.floor(this.sys.game.config.width/3.4),Math.floor(this.sys.game.config.height/1.04),"Based on classic arcade game Pacman of 1980",{fontSize:"16px",color:"#9ff",align:"justify",fontFamily:"Arial"});const t=[Math.floor(this.sys.game.config.width/2),Math.floor(this.sys.game.config.height/20),Math.floor(this.sys.game.config.height/5)];this.add.timeline([{at:1800,run:()=>{this.botoninicio.create("PreGame",!1),p(t[0],t[2]+50,"particula1",{min:60,max:120},{min:2500,max:3e3},{start:.2,end:0},16763921,null,!1,this)}}]).play(),this.add.timeline([{at:12e3,run:()=>{if(this.txtRecords.get().visible)this.txtRecords.get().setVisible(!1);else{this.txtRecords.get().setVisible(!0),console.warn(this.recordsTxtData);let t="    RECORDS\n",e=1;for(let s=0;s<this.recordsTxtData.length;s+=2){const a=this.recordsTxtData[s],i=this.recordsTxtData[s+1];console.log(a,i),t+=` ${e}. ${a}  ${i}\n`,e++}this.txtRecords.get().setText(t)}}}]).repeat(-1).play(),x(this.intermision,!1,.6),console.log(this.txt)}update(){}}class R extends s.Scene{constructor(){super("Preloader")}init(){const t=this.sys.game.config.width,e=this.sys.game.config.height;this.load.image("fondo","assets/img/bg.png"),this.add.image(0,0,"fondo").setOrigin(0,0),this.txt=new o(this,{x:Math.floor(t/2),y:Math.floor(e/3.5),txt:" Loading...",size:55,color:"#ffa",style:"bold",stroke:"#f91",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.add.rectangle(Math.floor(t/2),Math.floor(e/2),Math.floor(t/1.5),Math.floor(e/12)).setStrokeStyle(1,16772744);const s=this.add.rectangle(Math.floor(t/2)-Math.floor(t/3)+4,Math.floor(e/2),4,Math.floor(e/14),16750865);this.load.on("progress",(e=>{s.width=Math.floor(t/1.52)*e}))}preload(){this.load.setPath("assets"),this.load.image("fondo-pacman","./img/fondo_pacmanPh.png"),this.load.image("boton-nueva-partida","./img/ui-newgame.png"),this.load.image("boton-more-settings","./img/ui-newgame.png"),this.load.image("boton-fire-joystick","./img/ui-1.png"),this.load.image("cruceta","./img/cruceta-up.png"),this.load.spritesheet("radio-buttons","./img/radio-buttons-ssheet.png",{frameWidth:50,frameHeight:50}),this.load.spritesheet("boton-fullscreen","./img/boton-fullscreen.png",{frameWidth:64,frameHeight:64}),this.load.image("particula1","./img/particula1.png"),this.load.spritesheet("laberinto-1","./img/atlas-pacman.png",{frameWidth:228,frameHeight:248}),this.load.spritesheet("tile-map-ssheet","./img/tilemap-pacman.png",{frameWidth:16,frameHeight:16}),this.load.image("puntito","./img/puntito.png"),this.load.image("tile-pacman-marron","./img/tile_pacmanMarron.png"),this.load.spritesheet("pacman","./img/pac-animasPh.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("pacman-dies","./img/pacmanDies-ssheet.png",{frameWidth:16,frameHeight:16}),this.load.spritesheet("frutas","./img/frutas-ssheet.png",{frameWidth:16,frameHeight:16}),this.load.spritesheet("fantasmas","./img/fantasmas-ssheet.png",{frameWidth:16,frameHeight:16});for(let t=0;t<4;t++)this.load.spritesheet(`fantanim0${t}`,`./img/fantanim0${t}.png`,{frameWidth:16,frameHeight:16}),this.load.spritesheet(`fantanim1${t}`,`./img/fantanim1${t}.png`,{frameWidth:16,frameHeight:16}),this.load.spritesheet(`fantanim2${t}`,`./img/fantanim2${t}.png`,{frameWidth:16,frameHeight:16}),this.load.spritesheet(`fantanim3${t}`,`./img/fantanim3${t}.png`,{frameWidth:16,frameHeight:16}),this.load.spritesheet(`fantanim5${t}`,`./img/fantanim5${t}.png`,{frameWidth:50,frameHeight:50}),this.load.spritesheet(`fantasmon${t}`,`./img/fantasmon${t}.png`,{frameWidth:640,frameHeight:640});this.load.audio("gameover-retro","./audio/gameoveretro.ogg"),this.load.audio("you-win","./audio/you-win.mp3"),this.load.audio("key","./audio/key.wav"),this.load.audio("numkey","./audio/numkey.wav"),this.load.audio("pacman-azules","./audio/pacmanazules.ogg"),this.load.audio("pacman-dies","./audio/pacmandies.ogg"),this.load.audio("pacman-eating-cherry","./audio/pacmaneatingcherry.mp3"),this.load.audio("pacman-eating-ghost","./audio/pacmaneatinghost.ogg"),this.load.audio("pacman-inicio-nivel","./audio/pacmaninicionivel.ogg"),this.load.audio("pacman-intermision","./audio/pacmanintermision.ogg"),this.load.audio("pacman-sirena","./audio/pacmansirena.ogg"),this.load.audio("pacman-waka","./audio/pacmanwakawaka.mp3")}create(){this.scene.start("MainMenu")}}class $ extends s.Scene{constructor(){super("More-Settings")}init(){this.txt=new o(this,{x:Math.floor(this.sys.game.config.width/2),y:0,txt:" Choose Pacman velocity: ",size:36,color:"#ff1",style:"bold",stroke:"#1bd",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,0],elastic:!1,dura:0}),this.txt.create(),this.txt.get().setDepth(i.depth.textos).setAlpha(1).setScale(1),this.botoninicio=new I(this,{left:Math.floor(this.sys.game.config.width/1.4),top:Math.floor(this.sys.game.config.height/1.25),id:"boton-nueva-partida",scX:.6,scY:.5,angle:1,originX:.5,originY:.5,texto:" Start ",nextScene:"Game"}),this.radioSpeed=[],this.radioSpeed.push(new P(this,{left:Math.floor(this.sys.game.config.width/15),top:Math.floor(this.sys.game.config.height/6),addLeft:0,orX:0,orY:.5,frame:0,scale:1,txtSize:50,texto:" Slow ",id:"1slow-velocity"})),this.radioSpeed.push(new P(this,{left:Math.floor(this.sys.game.config.width/15),top:Math.floor(this.sys.game.config.height/3.4),addLeft:0,orX:0,orY:.5,frame:1,scale:1,txtSize:50,texto:" Normal ",id:"2Normal-velocity"})),this.radioSpeed.push(new P(this,{left:Math.floor(this.sys.game.config.width/15),top:Math.floor(this.sys.game.config.height/2.4),addLeft:0,orX:0,orY:.5,frame:0,scale:1,txtSize:50,texto:" Fast ",id:"4Fast-velocity"})),this.radioSpeed.push(new P(this,{left:Math.floor(this.sys.game.config.width/15),top:Math.floor(this.sys.game.config.height/1.8),addLeft:0,orX:0,orY:.5,frame:0,scale:1,txtSize:50,texto:" Turbo ",id:"8Turbo-velocity"})),this.radioInvulnerability=[],this.radioInvulnerability.push(new P(this,{left:Math.floor(this.sys.game.config.width/10),top:Math.floor(this.sys.game.config.height/1.4),addLeft:99,orX:.5,orY:.5,frame:1,scale:.9,txtSize:30,texto:"Normal Game",id:"normal-mode"})),this.radioInvulnerability.push(new P(this,{left:Math.floor(this.sys.game.config.width/10),top:Math.floor(this.sys.game.config.height/1.2),addLeft:99,orX:.5,orY:.5,frame:0,scale:.9,txtSize:30,texto:"Invulnerability",id:"invulnerability-mode"}))}create(){this.add.image(0,0,"fondo-pacman").setDepth(i.depth.fondo).setOrigin(0,0),this.radioSpeed.forEach((t=>t.create())),this.radioInvulnerability.forEach((t=>t.create())),this.botoninicio.create()}}class V extends Phaser.Scene{constructor(){super({key:"Congratulations"})}init(){this.botoninicio=new I(this,{left:Math.floor(this.sys.game.config.width/2),top:Math.floor(this.sys.game.config.height/1.3),id:"boton-nueva-partida",scX:.6,scY:.5,angle:1,originX:.5,originY:.5,texto:" Continue ",nextScene:"Game"})}create(){this.intermision=this.sound.add("pacman-intermision");const t=[i.screen.escBoundsX,i.screen.escBoundsY];this.incremento_nivel=i.getNivel()+1,this.add.image(0,0,"fondo-pacman").setScale(t[0],t[1]).setDepth(i.depth.fondo).setOrigin(0,0);const e=Phaser.Math.Between(0,3);if(this.fantasmon=this.add.sprite(-400,Math.floor(this.sys.game.config.height/1.8),`fantasmon${e}`),this.fantasmon.setDepth(i.depth.fantasmon).setOrigin(.5,.5).setScale(.35).setFlipX(!1),this.fantasmon.setData("vel",2),this.incremento_nivel<=2)for(let s=0;s<4;s++)this.anims.create({key:`anim-fantasmon${s}`,frames:this.anims.generateFrameNumbers(`fantasmon${s}`,{start:0,end:1}),frameRate:15,yoyo:!0,repeat:-1});this.fantasmon.anims.play(`anim-fantasmon${e}`),this.txt=new o(this,{x:Math.floor(this.sys.game.config.width/2),y:Math.floor(this.sys.game.config.height/3.5),txt:" Level Up! ",size:99,color:"#ffa",style:"bold",stroke:"#f91",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.txt.get().setDepth(i.depth.textos).setAlpha(1).setScale(.1),this.tweens.add({targets:this.txt.get(),scale:1,duration:3e3}),p(this.sys.game.config.width/2,this.sys.game.config.height/2,"particula1",{min:90,max:320},{min:5500,max:6e3},{start:0,end:.4},16763921,null,!1,this),this.add.timeline([{at:3200,run:()=>{i.setNivel(this.incremento_nivel),this.botoninicio.create()}}]).play(),x(this.intermision,!1,.8),console.log(this.txt)}update(){this.fantasmon.x+=this.fantasmon.getData("vel"),(this.fantasmon.x>this.sys.game.config.width+400&&this.fantasmon.getData("vel")>0||this.fantasmon.x<-400&&this.fantasmon.getData("vel")<0)&&(this.fantasmon.setData("vel",-this.fantasmon.getData("vel")),this.fantasmon.flipX?this.fantasmon.setFlipX(!1):this.fantasmon.setFlipX(!0))}}const A={type:Phaser.AUTO,width:864,height:704,parent:"game-container",backgroundColor:"#870",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{debug:!1}},pixelArt:!0,scene:[r,R,B,N,$,G,V]};new Phaser.Game(A);
